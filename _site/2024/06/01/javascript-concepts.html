<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v3.9.3" /><meta property="og:title" content="Javascript Concepts." /><meta property="og:locale" content="en_US" /><meta name="description" content="JavaScript Concepts" /><meta property="og:description" content="JavaScript Concepts" /><link rel="canonical" href="http://localhost:4000/myblog/2024/06/01/javascript-concepts" /><meta property="og:url" content="http://localhost:4000/myblog/2024/06/01/javascript-concepts" /><meta property="og:site_name" content="Kaustubh Deokar" /><meta property="og:image" content="http://localhost:4000/myblog/assets/img/event_loop.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-06-01T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:image" content="http://localhost:4000/myblog/assets/img/event_loop.png" /><meta property="twitter:title" content="Javascript Concepts." /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-06-01T00:00:00+05:30","datePublished":"2024-06-01T00:00:00+05:30","description":"JavaScript Concepts","headline":"Javascript Concepts.","image":"http://localhost:4000/myblog/assets/img/event_loop.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/myblog/2024/06/01/javascript-concepts"},"url":"http://localhost:4000/myblog/2024/06/01/javascript-concepts"}</script><title> Javascript Concepts. - Kaustubh Deokar</title><link rel="shortcut icon" href="/myblog/favicon.png"><link rel="alternate" type="application/atom+xml" title="Kaustubh Deokar" href="/myblog/atom.xml"><link rel="alternate" type="application/json" title="Kaustubh Deokar" href="http://localhost:4000/myblog/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/myblog/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:'Ubuntu Mono', monospace;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">Kaustubh Deokar</h1>--><nav role="navigation"><ul><li><a href="/myblog/" >Summary</a></li><li><a href="/myblog/blog/" >Blog</a></li><li><a href="/myblog/category" >Category</a></li><li><a href="/myblog/resume/" >Resume</a></li><li><a href="/myblog/project/" >Project</a></li></ul></nav></header><section class="post"><h2>Javascript Concepts.</h2><h1 id="javascript-concepts">JavaScript Concepts</h1><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#javascript-concepts">JavaScript Concepts</a><ul><li><a href="#table-of-contents">Table of Contents</a></li><li><a href="#execution-context">Execution Context</a></li><li><a href="#call-stack">Call Stack</a></li><li><a href="#scope">Scope</a></li><li><a href="#variable-declarations">Variable Declarations</a></li><li><a href="#shadowing">Shadowing</a></li><li><a href="#closure">Closure</a></li><li><a href="#function-statement--function-declaration">Function Statement \&amp; Function Declaration</a></li><li><a href="#function-expression">Function Expression</a></li><li><a href="#first-class-functions">First Class Functions</a></li><li><a href="#callback-functions">Callback Functions</a></li><li><a href="#event-loop">Event Loop</a></li><li><a href="#javascript-runtime-environment">JavaScript Runtime Environment</a></li><li><a href="#tasks-done-by-runtime-environment">Tasks Done by Runtime Environment</a></li><li><a href="#set-timeout">Set Timeout</a></li></ul></li></ul><h2 id="execution-context">Execution Context</h2><ul><li>Everything happens inside an execution context.</li><li>Execution context has a memory component and a code component.</li><li>It is single-threaded and synchronous.</li></ul><h2 id="call-stack">Call Stack</h2><ul><li>Execution contexts are managed by call stacks.</li></ul><h2 id="scope">Scope</h2><ul><li>Directly related to lexical environment.<ul><li>Lexical - in hierarchy.</li><li>Lexical environment of a function: its local memory plus the lexical environment of its parent.</li><li>In simple terms, a child will be able to access things locally declared, plus the things declared by its parents.</li><li>This hierarchical searching in the functions, starting from the child to its parent, is known as <strong>SCOPE CHAIN</strong>.</li></ul></li></ul><h2 id="variable-declarations">Variable Declarations</h2><ul><li>Types of variable declarations in JavaScript.<ul><li>We can access variables declared with the <code class="language-plaintext highlighter-rouge">var</code> keyword before they are declared as they are declared in the global scope.</li><li><code class="language-plaintext highlighter-rouge">let</code> and <code class="language-plaintext highlighter-rouge">const</code> are hoisted but they cannot be used unless assigned because they are not declared in the global scope but a separate scope <strong>(SCRIPT/BLOCK)</strong>. They are put in something called as temporal dead zone.</li><li>If a user tries to fetch the variable declared by <code class="language-plaintext highlighter-rouge">let</code> or <code class="language-plaintext highlighter-rouge">const</code> before it is assigned, we get a <strong>reference error</strong>.</li><li>We will also get a reference error if a variable which is not declared is tried to be accessed during the program.</li></ul></li></ul><h2 id="shadowing">Shadowing</h2><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// a shadows the global 'a'</span>
    <span class="kd">let</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="closure">Closure</h2><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">x</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="nx">y</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">x</span><span class="p">();</span>
<span class="nx">z</span><span class="p">();</span>
<span class="c1">// Even though function y is done execution, it still has access to the variable 'a' from function x.</span>
<span class="c1">// This is known as closure.</span>
</code></pre></div></div><ul><li>Function bundled with its lexical environment.</li><li>Whenever the function is returned, even if itâ€™s vanished in execution context, it still remembers the reference it was pointing to. Please note, the reference, not the value!</li></ul><h2 id="function-statement--function-declaration">Function Statement &amp; Function Declaration</h2><ul><li>Function statements and function declarations are used interchangeably.</li></ul><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Function statement -&gt; function declaration</span>
<span class="kd">function</span> <span class="nx">y</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello y</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="function-expression">Function Expression</h2><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">hello b</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><ul><li>The difference between function statement and function expression is hoisting.</li><li><p>We can access <code class="language-plaintext highlighter-rouge">y</code> before declaring but <code class="language-plaintext highlighter-rouge">b</code> will give us an error if accessed before declaring.</p></li><li>params -&gt; function parameters</li><li>args -&gt; with which a function is called.</li></ul><h2 id="first-class-functions">First Class Functions</h2><ul><li>The ability to use functions as values, arguments, can be executed inside a closed function, and can be taken as return form.</li></ul><h2 id="callback-functions">Callback Functions</h2><ul><li>Functions attached to some event, like on click or setTimeout when time expired, where the code executes after the time countdown is done.</li></ul><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">x</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">el</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">clickhere</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="nx">xyz</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">count</span><span class="o">++</span><span class="p">);</span>
        <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Element not found</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">x</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div><p>Above is a callback function with a closure.</p><h2 id="event-loop">Event Loop</h2><p>When the timer gets expired for a callback function, the web APIs (browser context) or C++ APIs in the Node context put the callback function in the callback queue. Then the EVENT loop puts them into the execution stack.</p><p>The same is the case with addEventListener -&gt; when some functionality has to be executed on click. When the respective button is clicked, the callback function is put in the callback queue, and then the event loop puts it on the execution stack.</p><ul><li><p><img src="/myblog/assets/img/event_loop.png" alt="" /></p></li><li><p>Mutation observer -&gt; if there is some mutation in the DOM tree, it might run some callback functions. So it also populates the microtask queue.</p></li></ul><p>In the above example, there are 3 things happening:</p><ul><li>Code execution</li><li>Fetch call</li><li>Callback function with a timer.</li></ul><ol><li>Browser has superpowers that are lent to JS engine to execute some tasks. These superpowers include web APIs such as console, location, DOM API, setTimeout, fetch, local storage.</li><li>Callback functions and event handlers are first stored in the Web API environment and then transferred to the callback queue.</li><li>Promises and mutation observers are stored in the API environment and then transferred to the microtask queue.</li><li>Event loop continuously observes call stack and when it is empty, it transfers task to call stack.</li><li>Microtasks are given priority over callback tasks.</li><li>Too many microtasks generated can cause starvation (not giving time to callback tasks to execute).</li></ol><h2 id="javascript-runtime-environment">JavaScript Runtime Environment</h2><ul><li>We need one to execute JS.</li><li>Browsers have it built-in. Another example is Node.js.</li></ul><h2 id="tasks-done-by-runtime-environment">Tasks Done by Runtime Environment</h2><ul><li>Parsing the JavaScript code to form an AST (Abstract Syntax Tree).</li><li>JavaScript can execute code using an interpreter or compiler both. Most modern browsers now support a JIT compilation which has the ability to interpret and compile the code.</li><li>After parsing, the interpreter starts interpreting the code line by line. The compiler also helps to optimize it. The algorithm to do so may differ from engine to engine.</li><li>After which they go for execution, and where the memory heap and execution stack come into the picture.</li><li>Garbage collector - mark and sweep algorithm.</li></ul><h2 id="set-timeout">Set Timeout</h2><p>The <code class="language-plaintext highlighter-rouge">setTimeout</code> will be put in the execution stack only after IT IS EMPTY. So, in short, it is guaranteed to run after AT LEAST 2 seconds as per the below example.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">start</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">after 2 seconds</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">startTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">endTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">endTime</span> <span class="o">-</span> <span class="nx">startTime</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">endTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div></div><span class="meta"><time datetime="2024-06-01T00:00:00+05:30">June 1, 2024</time> &middot; </span></section></main></body></html>